function addPageTag(){var c=$("#tag-button").html();if(c!="Please wait..."){$("#tag-button").html("Please wait...");$("#tag-error").text(" ");var a=document.getElementById("tag-input").value.trim();if(a.length==0){$("#tag-error").text("Please enter a keyword.");$("#tag-button").html("add");return false}if(!/^[a-zA-Z0-9\s]*$/.test(a)){$("#tag-error").text("Alphabets, numbers and the space are the only characters allowed in a keyword.");$("#tag-button").html("add");return false}if(a.length>50){$("#tag-error").text("A keyword cannot have more than 50 characters.");$("#tag-button").html("add");return false}var e=a.toLowerCase().replace(/\s/g,"");if(TL.includes(e)){$("#tag-error").text("Keyword already exists.");$("#tag-button").html("add");return false}var d=document.getElementById("tag-count").value;if(d>=20){$("#tag-error").text("A business page can have a maximum of 20 keywords.");$("#tag-button").html("add");return false}d++;document.getElementById("tag-count").value=d;TL.push(e);$.ajax({type:"POST",url:"/action/add-entity-tag",data:{entityId:pageIdHidden.value,tag:a},dataType:"json"}).always(function(b){if(d==1){$("#page-tags").html('<div id="'+e+'" style="display:inline-block; border-radius:14px; border:1px solid #61cf81; padding:4px 10px 4px 10px; margin-top:6px; margin-right:6px; font-family:Arial; font-size:16px; color:#365899"><span id="'+e+'-value">'+a+'</span>&nbsp;&nbsp;&nbsp;<a href="javascript:" onclick="deletePageTag(\''+e+'\')" title="Delete this tag">&nbsp;x&nbsp;</a></div>')}else{$("#page-tags").append('<div id="'+e+'" style="display:inline-block; border-radius:14px; border:1px solid #61cf81; padding:4px 10px 4px 10px; margin-top:6px; margin-right:6px; font-family:Arial; font-size:16px; color:#365899"><span id="'+e+'-value">'+a+'</span>&nbsp;&nbsp;&nbsp;<a href="javascript:" onclick="deletePageTag(\''+e+'\')" title="Delete this tag">&nbsp;x&nbsp;</a></div>')}document.getElementById("tag-input").value="";$("#tag-button").html("add")})}}function deletePageTag(d){var c=$("#tag-error").html();if(c!="Please wait..."){$("#tag-error").html("Please wait...");var a=document.getElementById(d+"-value").textContent.trim();$.ajax({type:"POST",url:"/action/delete-entity-tag",data:{entityId:pageIdHidden.value,tag:a},dataType:"json"}).always(function(e){var b=document.getElementById("tag-count").value;b--;document.getElementById("tag-count").value=b;TL.splice(TL.indexOf(d),1);$("#"+d).text(" ");$("#tag-error").text(" ")})}};